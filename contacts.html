<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="shortcut icon" type="image/jpg" href="images/icon.png"/>
        <title>Federico Marangi - Contact</title>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
    </head>
    <body>
        <div class="header" id="header">
            <a class="link" href="index.html"><h1 class="title">Federico Marangi</h1></a>
            <div class="menu" id="list">
                <a class="link" href="about.html"><h1>About</h1></a>
                <a class="link" href="contacts.html"><h1>Contact</h1></a>
            </div>
        </div>

        <div class="about-title"><h1>Contact Federico</h1></div>
        <div class="about-container">
            <div class="about-img">
                <img src="images/modal.jpeg" alt="Cheetah!" />
            </div>
            <div class="contact-desc">
                <p class="contact-p">Contact Federico through his email address: <strong>fede.mara@gmail.com</strong></p>
                <div class="contact-or left">
                    <div class="or"></div>
                    <div><p class="contact-p-small">or</p></div>
                    <div class="or"></div>
                </div>
                <p class="contact-p">Leave your details below. Federico will contact you as soon as possible</p>
                <p class="contact-h1">Full Name</p>
                <div class="input"><input onchange="inputChange()" id="fullname" placeholder="Full Name" spellcheck="false"></div>
                <p class="contact-h1">Insert your Email</p>
                <div class="input"><input onchange="inputChange()" id="email" placeholder="Email" spellcheck="false"></div>
                <p class="contact-h1">Insert your body message</p>
                <div class="textarea"><textarea onchange="inputChange()" id="body" spellcheck="false"></textarea></div>
                <div class="button"><button id="submit" onclick="submit()" disabled>Submit</button></div>
            </div>
        </div>
        <div class="about" id="about">
            <a href="https://www.instagram.com/fede.mara" target="_blank">
                <img class="social" src="images/ig.png">
            </a>
            <a class="ln" href="https://www.linkedin.com/in/federico-marangi-313930173" target="_blank">
                <img class="social" src="images/ln.png">
            </a>
            </div>
            <script src="index.js"></script>
            <script src="https://smtpjs.com/v3/smtp.js"></script>
    <script>

        function inputChange() {
            let fullname = document.getElementById('fullname').value
            let email = document.getElementById('email').value
            let body = document.getElementById('body').value
            let button = document.getElementById('submit')
            console.log('fullname', fullname, 'email', email, 'body', body)
            if (fullname != "" && email != "" && body != "") {
                button.disabled = false
            } else { 
                button.disabled = true
            }
        }

        function submit() {
        /* Email.send({
            Host: 'smtp.elasticemail.com 2525',
            Username: 'website.portfolio.info@gmail.com',
            Password: '69729EC67F1AD0085D12A4EC1E187340DD38',
            To: 'website.portfolioco.info@gmail.com',
            From: 'website.portfolioco.info@gmail.com',
            Subject: 'TEST',
            Body: 'Test'
        }).then( message => alert(message) ); */
        let fullname = document.getElementById('fullname').value
        let email = document.getElementById('email').value
        let body = document.getElementById('body').value
        let button = document.getElementById('submit')
        let emailbody = "<p>Un utente ti ha contattato!</p>" + "<p>Nome: <strong>" + fullname + "</strong></p><p>Email: <strong>" + email + " </strong></p><br>"
        + "<p>Ecco cosa ti ha scritto:</p>" + "<p>"+ body +"</p>"
        Email.send({
            Host : "smtp.elasticemail.com",
            Username : "website.portfolio.info@gmail.com",
            Password : "69729EC67F1AD0085D12A4EC1E187340DD38",
            To : 'website.portfolioco.info@gmail.com',
            From : "website.portfolioco.info@gmail.com",
            Subject : "Sei stato contattato da " + fullname,
            Body : emailbody
        }).then(
            message =>  {
                if (message == 'OK') {
                    alert('Message sent correctly')
                    fullname = ''
                    email = ''
                    body = ''
                    button.disabled = true
                } else {
                    alert('An error occourred, please retry')
                }
            }
        );
        }
    </script>
    </body>
</html>